<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CenÃ¡rio Animado â€” SeleÃ§Ã£o de Personagens</title>
<style>
Â  :root{
Â  Â  --sky1:#cfeeff; --sky2:#e8f9f1;
Â  Â  --hill-a:#d9f3bf; --hill-b:#c9eeab; --hill-c:#b9e997; --hill-d:#8fcd6b;
Â  Â  --text:#2f746b;
Â  Â  --primary:#7BC4B8;
Â  Â  --secondary:#FFD93D;
Â  Â  --accent:#FFB6D9;
Â  Â  --dark:#2d4a3e;
Â  }

Â  html,body{height:100%;margin:0;font-family:'Comic Sans MS', 'Chalkboard SE', 'Segoe UI', Arial, sans-serif;background:linear-gradient(to bottom,var(--sky1),var(--sky2));}
Â  #app{width:100%;height:100vh;overflow:hidden;position:relative}

Â  /* --- 1. NOVO DESIGN DE SELEÃ‡ÃƒO DE PERSONAGEM (GRID) --- */
Â  #charSelect{position:fixed;inset:0;background:linear-gradient(135deg,#2c5f6f,#4a8b9e);display:flex;align-items:center;justify-content:center;z-index:10000;flex-direction:column;padding:20px;box-sizing:border-box}
Â  #charSelect h1{color:white;font-size:42px;margin-bottom:30px;text-shadow:0 4px 12px rgba(0,0,0,0.3);font-weight:700;letter-spacing:1px}

Â  #charGrid{
Â  Â  display: grid;
Â  Â  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
Â  Â  gap: 20px;
Â  Â  max-width: 900px;
Â  Â  width: 90%;
Â  Â  margin-bottom: 40px;
Â  }
Â  .char-card{
Â  Â  background:rgba(255,255,255,0.95);
Â  Â  border-radius:18px;
Â  Â  cursor:pointer;
Â  Â  transition:all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
Â  Â  box-shadow:0 8px 20px rgba(0,0,0,0.1);
Â  Â  display:flex;
Â  Â  flex-direction:column;
Â  Â  align-items:center;
Â  Â  padding: 15px;
Â  Â  text-align: center;
Â  Â  border: 3px solid transparent;
Â  }
Â  .char-card:hover{transform:translateY(-5px);box-shadow:0 12px 25px rgba(0,0,0,0.15)}
Â  .char-card.selected{
Â  Â  transform:scale(1.05);
Â  Â  border-color:var(--accent);
Â  Â  box-shadow:0 18px 40px rgba(255,182,217,0.5);
Â  }
Â  .char-image svg{width:100%; height: auto; max-width: 100px; margin-bottom: 10px;}
Â  .char-card .name{font-size:20px;font-weight:700;color:var(--dark);margin-bottom:5px}
Â  .char-card .description{font-size:13px;color:#666;line-height:1.4; opacity: 0.8;}
Â  
Â  #startBtn{margin-top:0;padding:14px 40px;font-size:20px;font-weight:700;background:var(--primary);color:white;border:none;border-radius:999px;cursor:pointer;transition:all 0.2s;box-shadow:0 6px 18px rgba(0,0,0,0.2);animation:float 3s ease-in-out infinite}
Â  #startBtn:hover{background:#66B39F;transform:scale(1.05);box-shadow:0 8px 24px rgba(0,0,0,0.3)}
Â  #startBtn:disabled{opacity:0.5;cursor:not-allowed;animation:none}
Â  @keyframes float{0%{transform:translateY(0px)}50%{transform:translateY(-10px)}100%{transform:translateY(0px)}}

Â  /* HUD */
Â  #hud{position:absolute;left:12px;top:12px;z-index:120;color:var(--text);font-weight:700;background:rgba(255,255,255,0.85);padding:8px 12px;border-radius:999px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
Â  #instructions{position:absolute;right:12px;top:12px;z-index:120;background:rgba(255,255,255,0.9);padding:8px 12px;border-radius:999px;font-size:13px}

Â  /* viewport & layers */
Â  #viewport{position:absolute;inset:0;overflow:hidden;pointer-events:auto}
Â  .parallax-layer{position:absolute;left:0;top:0;height:100%;width:100%;pointer-events:none;will-change:transform}
Â  .parallax-layer svg{position:absolute;left:0;bottom:0;height:100%;width:6000px;display:block}

Â  /* z-order */
Â  .mountains{z-index:5}
Â  .hills-back{z-index:8}
Â  .hills-mid{z-index:12}
Â  .hills-front{z-index:16}
Â  .hills-very{z-index:18}
Â  .skyobjs{z-index:20}
Â  .trees{z-index:30}
Â  .flowers{z-index:40}
Â  #playerWrap{z-index:60;pointer-events:none}

Â  /* clouds, trees, flowers visuals minimal (JS creates nodes) */
Â  .cloud{position:absolute;opacity:0.85}
Â  .tree{position:absolute;bottom:0}
Â  .flower{position:absolute;bottom:6px;border-radius:50%}

Â  /* character */
Â  #playerWrap{position:absolute;left:50%;bottom:92px;transform:translateX(-50%);width:120px;height:140px}
Â  .chibi{position:relative;width:100%;height:100%}
Â  .chibi .body{position:absolute;left:50%;transform:translateX(-50%);top:10px;width:70px;height:80px;border-radius:36px}
Â  .legs{position:absolute;left:50%;transform:translateX(-50%);bottom:6px;width:60px;height:48px}
Â  .leg{position:absolute;bottom:0;width:12px;height:36px;border-radius:6px;transform-origin:top center}
Â  .leg.left{left:12px}.leg.right{right:12px}
Â  .walking .leg.left{animation:leftStep 360ms linear infinite}.walking .leg.right{animation:rightStep 360ms linear infinite}
Â  @keyframes leftStep{0%{transform:rotate(6deg)}50%{transform:rotate(-22deg)}100%{transform:rotate(6deg)}}
Â  @keyframes rightStep{0%{transform:rotate(-22deg)}50%{transform:rotate(6deg)}100%{transform:rotate(-22deg)}}

Â  /* EYES: eyeball + pupil */
Â  .eye {
Â  Â  position: absolute;
Â  Â  top: 26px;
Â  Â  width: 14px;
Â  Â  height: 16px;
Â  Â  background: #fff;
Â  Â  border-radius: 50%;
Â  Â  box-shadow: inset 0 -2px 0 rgba(0,0,0,0.06);
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  justify-content: center;
Â  Â  overflow: hidden;
Â  Â  transform-origin: center;
Â  Â  transition: transform 80ms linear;
Â  Â  pointer-events: none;
Â  }
Â  .eye.left { left: 18px; }
Â  .eye.right { right: 18px; }

Â  .pupil {
Â  Â  width: 6px;
Â  Â  height: 6px;
Â  Â  background: #22333b;
Â  Â  border-radius: 50%;
Â  Â  transform: translate(0,0);
Â  Â  transition: transform 120ms linear;
Â  Â  will-change: transform;
Â  Â  box-shadow: 0 1px 0 rgba(255,255,255,0.12) inset;
Â  }

Â  /* blink */
Â  .eye.blink { animation: blinkAnim 160ms steps(1, end) forwards; }
Â  @keyframes blinkAnim {
Â  Â  0% { transform: scaleY(1); }
Â  Â  50% { transform: scaleY(0.12); }
Â  Â  100% { transform: scaleY(1); }
Â  }

Â  /* flying butterfly */
Â  .flying-butterfly{position:fixed;left:-12vw;width:40px;pointer-events:auto;cursor:pointer;z-index:230;transition:transform .15s}
Â  .flying-butterfly:hover{transform:scale(1.15)}
Â  @keyframes crossScreen{0%{left:-12vw}50%{left:50vw;transform:translateY(-6vh)}100%{left:112vw}}

Â  /* --- 2. NOVO ESTILO DO OVERLAY (JOGOS) --- */
Â  #overlay{position:fixed;inset:0;background:rgba(0,0,0,0.55);backdrop-filter:blur(3px);display:none;align-items:center;justify-content:center;z-index:9999}
Â  #overlayCard{
Â  Â  background:white;
Â  Â  padding:30px;
Â  Â  border-radius:12px;
Â  Â  max-width:480px;
Â  Â  text-align:center;
Â  Â  color:var(--dark);
Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
Â  }
Â  #overlayCard h2 {
Â  Â  margin-bottom: 20px;
Â  Â  color: var(--primary);
Â  Â  font-size: 28px;
Â  }
Â  #gameList {
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  gap: 12px;
Â  Â  margin-bottom: 20px;
Â  }
Â  .game-link {
Â  Â  text-decoration: none;
Â  Â  display: block;
Â  Â  padding: 12px 20px;
Â  Â  background: var(--secondary);
Â  Â  color: var(--dark);
Â  Â  font-weight: 700;
Â  Â  border-radius: 8px;
Â  Â  transition: background 0.2s, transform 0.1s;
Â  Â  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
Â  }
Â  .game-link:hover {
Â  Â  background: #f0c930;
Â  Â  transform: translateY(-2px);
Â  }
Â  #overlayClose{margin-top:10px;padding:8px 14px;background:var(--text);color:white;border-radius:8px;border:0;cursor:pointer;font-weight: bold;}
Â  #overlayClose:hover{background: #235850;}

Â  /* responsive tweaks */
Â  @media (max-width:700px){ 
Â  Â  .flying-butterfly{width:30px} 
Â  Â  #playerWrap{bottom:72px;width:88px;height:110px} 
Â  Â  .parallax-layer svg{width:3000px} 
Â  Â  #charSelect h1{font-size:28px} 
Â  Â  #charGrid{grid-template-columns: repeat(2, 1fr);}
Â  Â  .char-card{padding: 10px;}
Â  Â  .char-card .name{font-size:16px;}
Â  Â  .char-card .description{display: none;} /* Hide description on small screens */
Â  Â  #startBtn{padding:12px 30px;font-size:18px}
Â  }
</style>
</head>
<body>

<div id="charSelect">
Â  <h1>Escolha seu personagem!</h1>
Â  <div id="charGrid">
Â  Â  Â  </div>
Â  <button id="startBtn" disabled>ComeÃ§ar Aventura</button>
</div>

<div id="overlay" aria-hidden="true">
Â  <div id="overlayCard" role="dialog" aria-modal="true">
Â  Â  <h2>ğŸ‰ Nossos Jogos de LIBRAS! ğŸ‰</h2>
Â  Â  <div id="gameList">
Â  Â  Â  <a href="./memoria.html" class="game-link">Jogo da MemÃ³ria</a>
Â  Â  Â  <a href="./jogoCorrespondencia.html" class="game-link">Jogo de CorrespondÃªncia</a>
Â  Â  Â  <a href="./quizLibras.html" class="game-link">Quiz de LIBRAS</a>
Â  Â  Â  <a href="./jogosInicial.html" class="game-link">Voltar para a Tela Inicial dos Jogos</a>
Â  Â  </div>
Â  Â  <button id="overlayClose">Continuar Explorando</button>
Â  </div>
</div>

<div id="app" style="display:none">
Â  <div id="hud">Passos: <span id="counter">0</span></div>
Â  <div id="instructions">Use â† â†’ para mover â€” ENTER pula</div>

Â  <div id="viewport">

Â  Â  Â  Â  <div class="parallax-layer mountains" data-speed="0.18">
Â  Â  Â  <svg viewBox="0 0 1200 300" preserveAspectRatio="xMinYMax slice"><defs><linearGradient id="mg1" x1="0" x2="0" y1="0" y2="1"><stop offset="0" stop-color="#ccecf8"/><stop offset="1" stop-color="#9ecde6"/></linearGradient></defs><path d="M0 220 L180 80 L320 190 L460 70 L620 220 L780 120 L900 220 L1060 90 L1200 220 L1200 300 L0 300 Z" fill="url(#mg1)"/></svg>
Â  Â  </div>

Â  Â  Â  Â  <div class="parallax-layer hills-back" data-speed="0.30" id="h1">
Â  Â  Â  <svg viewBox="0 0 1200 300" preserveAspectRatio="xMinYMax slice">
Â  Â  Â  Â  <path d="M0 210 C200 150 380 160 540 190 C700 220 880 210 1200 190 L1200 300 L0 300 Z" fill="var(--hill-a)" />
Â  Â  Â  </svg>
Â  Â  </div>

Â  Â  <div class="parallax-layer hills-mid" data-speed="0.42" id="h2">
Â  Â  Â  <svg viewBox="0 0 1200 300" preserveAspectRatio="xMinYMax slice">
Â  Â  Â  Â  <path d="M0 240 C180 180 360 185 540 220 C720 255 900 250 1200 230 L1200 300 L0 300 Z" fill="var(--hill-b)" />
Â  Â  Â  </svg>
Â  Â  </div>

Â  Â  <div class="parallax-layer hills-front" data-speed="0.55" id="h3">
Â  Â  Â  <svg viewBox="0 0 1200 300" preserveAspectRatio="xMinYMax slice">
Â  Â  Â  Â  <path d="M0 260 C160 210 340 225 520 255 C700 285 900 280 1200 255 L1200 300 L0 300 Z" fill="var(--hill-c)" />
Â  Â  Â  </svg>
Â  Â  </div>

Â  Â  <div class="parallax-layer hills-very" data-speed="0.72" id="h4">
Â  Â  Â  <svg viewBox="0 0 1200 300" preserveAspectRatio="xMinYMax slice">
Â  Â  Â  Â  <path d="M0 280 C200 240 420 260 630 280 C840 300 1050 290 1200 270 L1200 300 L0 300 Z" fill="var(--hill-d)" />
Â  Â  Â  </svg>
Â  Â  </div>

Â  Â  <div id="skyObjs" class="parallax-layer skyobjs" data-speed="0.62"></div>
Â  Â  <div id="trees" class="parallax-layer trees" data-speed="0.85"></div>
Â  Â  <div id="flowers" class="parallax-layer flowers" data-speed="1"></div>

Â  Â  Â  Â  <div id="playerWrap">
Â  Â  Â  <div class="chibi" id="chibiRoot">
Â  Â  Â  Â  <div class="body">
Â  Â  Â  Â  Â  <div class="eye left"><div class="pupil"></div></div>
Â  Â  Â  Â  Â  <div class="eye right"><div class="pupil"></div></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="legs"><div class="leg left"></div><div class="leg right"></div></div>
Â  Â  Â  </div>
Â  Â  </div>

Â  </div></div><script>
/* ================= globals ================= */
const stageWidth = 6000;
const layers = Array.from(document.querySelectorAll('.parallax-layer'));
const counterEl = document.getElementById('counter');
const chibiRoot = document.getElementById('chibiRoot');

let cameraX = 0, steps = 0;
let movingLeft = false, movingRight = false;
let rafId = null;
let selectedChar = null;

// Character data with names and descriptions
const characters = [
Â  { 
Â  Â  id: 0,
Â  Â  name: "Verde",
Â  Â  description: "Amigo da natureza! Gosta de explorar florestas e brincar com os animais.",
Â  Â  body: 'linear-gradient(180deg,#7BC4B8,#66B39F)', 
Â  Â  legs: '#2d6b5f', 
Â  Â  hasAntenna: true,
Â  Â  image: `<svg width="120" height="120" viewBox="0 0 80 90">
Â  Â  Â  <ellipse cx="40" cy="65" rx="28" ry="12" fill="#2d4a3e" opacity="0.3"/>
Â  Â  Â  <rect x="36" y="50" width="8" height="30" rx="4" fill="#2d6b5f"/>
Â  Â  Â  <circle cx="40" cy="35" r="25" fill="#7BC4B8"/>
Â  Â  Â  <circle cx="30" cy="30" r="5" fill="white"/>
Â  Â  Â  <circle cx="50" cy="30" r="5" fill="white"/>
Â  Â  Â  <circle cx="31" cy="30" r="2.5" fill="#22333b"/>
Â  Â  Â  <circle cx="51" cy="30" r="2.5" fill="#22333b"/>
Â  Â  Â  <line x1="32" y1="15" x2="28" y2="8" stroke="#4a8b7e" stroke-width="4" stroke-linecap="round"/>
Â  Â  Â  <line x1="40" y1="12" x2="40" y2="4" stroke="#4a8b7e" stroke-width="4" stroke-linecap="round"/>
Â  Â  Â  <line x1="48" y1="15" x2="52" y2="8" stroke="#4a8b7e" stroke-width="4" stroke-linecap="round"/>
Â  Â  </svg>`
Â  },
Â  { 
Â  Â  id: 1,
Â  Â  name: "Amarelo",
Â  Â  description: "Sol radiante! Adora dias ensolarados e fazer amigos por onde passa.",
Â  Â  body: 'linear-gradient(180deg,#FFD93D,#e6c236)', 
Â  Â  legs: '#d4a91e', 
Â  Â  hasAntenna: false,
Â  Â  image: `<svg width="120" height="120" viewBox="0 0 80 90">
Â  Â  Â  <ellipse cx="40" cy="65" rx="28" ry="12" fill="#b8930f" opacity="0.3"/>
Â  Â  Â  <rect x="36" y="50" width="8" height="30" rx="4" fill="#d4a91e"/>
Â  Â  Â  <circle cx="40" cy="35" r="25" fill="#FFD93D"/>
Â  Â  Â  <circle cx="30" cy="30" r="5" fill="white"/>
Â  Â  Â  <circle cx="50" cy="30" r="5" fill="white"/>
Â  Â  Â  <circle cx="31" cy="30" r="2.5" fill="#22333b"/>
Â  Â  Â  <circle cx="51" cy="30" r="2.5" fill="#22333b"/>
Â  Â  Â  <path d="M 25 42 Q 40 50 55 42" stroke="#22333b" stroke-width="2" fill="none" stroke-linecap="round"/>
Â  Â  </svg>`
Â  },
Â  { 
Â  Â  id: 2,
Â  Â  name: "Rosa",
Â  Â  description: "Docinho de morango! Gosta de flores, doces e abraÃ§os quentinhos.",
Â  Â  body: 'linear-gradient(180deg,#FFB6D9,#e89fc2)', 
Â  Â  legs: '#a86b82', 
Â  Â  hasAntenna: false,
Â  Â  image: `<svg width="120" height="120" viewBox="0 0 80 90">
Â  Â  Â  <ellipse cx="40" cy="65" rx="28" ry="12" fill="#8b5a6b" opacity="0.3"/>
Â  Â  Â  <rect x="36" y="50" width="8" height="30" rx="4" fill="#a86b82"/>
Â  Â  Â  <ellipse cx="40" cy="35" rx="26" ry="28" fill="#FFB6D9"/>
Â  Â  Â  <circle cx="30" cy="32" r="4" fill="white"/>
Â  Â  Â  <circle cx="50" cy="32" r="4" fill="white"/>
Â  Â  Â  <circle cx="31" cy="32" r="2" fill="#22333b"/>
Â  Â  Â  <circle cx="51" cy="32" r="2" fill="#22333b"/>
Â  Â  Â  <ellipse cx="27" cy="30" rx="8" ry="10" fill="#ff9ec5" opacity="0.6"/>
Â  Â  Â  <ellipse cx="53" cy="30" rx="8" ry="10" fill="#ff9ec5" opacity="0.6"/>
Â  Â  </svg>`
Â  },
Â  { 
Â  Â  id: 3,
Â  Â  name: "Branco",
Â  Â  description: "Nuvem fofinha! Adora voar alto e espalhar alegria por todos os lugares.",
Â  Â  body: 'linear-gradient(180deg,#E8E8E8,#d0d0d0)', 
Â  Â  legs: '#8a8a8a', 
Â  Â  hasAntenna: false,
Â  Â  image: `<svg width="120" height="120" viewBox="0 0 80 90">
Â  Â  Â  <ellipse cx="40" cy="65" rx="28" ry="12" fill="#6b6b6b" opacity="0.3"/>
Â  Â  Â  <rect x="36" y="50" width="8" height="30" rx="4" fill="#8a8a8a"/>
Â  Â  Â  <ellipse cx="40" cy="38" rx="24" ry="26" fill="#E8E8E8"/>
Â  Â  Â  <circle cx="30" cy="35" r="5" fill="white"/>
Â  Â  Â  <circle cx="50" cy="35" r="5" fill="white"/>
Â  Â  Â  <circle cx="31" cy="35" r="2.5" fill="#22333b"/>
Â  Â  Â  <circle cx="51" cy="35" r="2.5" fill="#22333b"/>
Â  Â  Â  <ellipse cx="40" cy="30" rx="18" ry="20" fill="white" opacity="0.7"/>
Â  Â  </svg>`
Â  },
Â  { 
Â  Â  id: 4,
Â  Â  name: "Azul",
Â  Â  description: "Mar azulado! Gosta de nadar, mergulhar e descobrir tesouros no fundo do mar.",
Â  Â  body: 'linear-gradient(180deg,#6FB2D2,#5a9ec4)', 
Â  Â  legs: '#5a8bb8', 
Â  Â  hasAntenna: false,
Â  Â  image: `<svg width="120" height="120" viewBox="0 0 80 90">
Â  Â  Â  <ellipse cx="40" cy="65" rx="28" ry="12" fill="#4a6b8b" opacity="0.3"/>
Â  Â  Â  <rect x="36" y="50" width="8" height="30" rx="4" fill="#5a8bb8"/>
Â  Â  Â  <rect x="35" y="28" width="30" height="32" rx="8" fill="#6FB2D2"/>
Â  Â  Â  <circle cx="44" cy="38" r="4" fill="white"/>
Â  Â  Â  <circle cx="56" cy="38" r="4" fill="white"/>
Â  Â  Â  <circle cx="45" cy="38" r="2" fill="#22333b"/>
Â  Â  Â  <circle cx="57" cy="38" r="2" fill="#22333b"/>
Â  Â  Â  <rect x="35" y="20" width="10" height="12" rx="3" fill="#5a9ec4"/>
Â  Â  Â  <rect x="55" y="20" width="10" height="12" rx="3" fill="#5a9ec4"/>
Â  Â  </svg>`
Â  },
Â  { 
Â  Â  id: 5,
Â  Â  name: "Laranja",
Â  Â  description: "Frutinha saborosa! Gosta de correr, pular e se divertir o dia inteiro!",
Â  Â  body: 'linear-gradient(180deg,#FFB86F,#e6a563)', 
Â  Â  legs: '#d49a1e', 
Â  Â  hasAntenna: false,
Â  Â  image: `<svg width="120" height="120" viewBox="0 0 80 90">
Â  Â  Â  <ellipse cx="40" cy="65" rx="28" ry="12" fill="#b8830f" opacity="0.3"/>
Â  Â  Â  <rect x="36" y="50" width="8" height="30" rx="4" fill="#d49a1e"/>
Â  Â  Â  <circle cx="40" cy="32" r="20" fill="#FFB86F"/>
Â  Â  Â  <path d="M 28 22 Q 32 18 36 22" fill="#cc8844"/>
Â  Â  Â  <path d="M 44 22 Q 48 18 52 22" fill="#cc8844"/>
Â  Â  Â  <circle cx="32" cy="32" r="4" fill="white"/>
Â  Â  Â  <circle cx="48" cy="32" r="4" fill="white"/>
Â  Â  Â  <circle cx="33" cy="32" r="2" fill="#22333b"/>
Â  Â  Â  <circle cx="49" cy="32" r="2" fill="#22333b"/>
Â  Â  Â  <ellipse cx="40" cy="42" rx="6" ry="4" fill="#22333b" opacity="0.2"/>
Â  Â  </svg>`
Â  },
Â  { 
Â  Â  id: 6,
Â  Â  name: "Turquesa",
Â  Â  description: "Oceano mÃ¡gico! Gosta de aventuras, descobertas e brincadeiras na praia.",
Â  Â  body: 'linear-gradient(180deg,#6BCB9B,#5ab88a)', 
Â  Â  legs: '#5a8b7e', 
Â  Â  hasAntenna: false,
Â  Â  image: `<svg width="120" height="120" viewBox="0 0 80 90">
Â  Â  Â  <ellipse cx="40" cy="65" rx="28" ry="12" fill="#4a6b5f" opacity="0.3"/>
Â  Â  Â  <rect x="36" y="50" width="8" height="30" rx="4" fill="#5a8b7e"/>
Â  Â  Â  <ellipse cx="40" cy="35" rx="25" ry="28" fill="#6BCB9B"/>
Â  Â  Â  <circle cx="32" cy="32" r="5" fill="white"/>
Â  Â  Â  <circle cx="48" cy="32" r="5" fill="white"/>
Â  Â  Â  <circle cx="33" cy="32" r="2.5" fill="#22333b"/>
Â  Â  Â  <circle cx="49" cy="32" r="2.5" fill="#22333b"/>
Â  Â  Â  <path d="M 30 42 Q 40 46 50 42" stroke="#22333b" stroke-width="1.5" fill="none"/>
Â  Â  </svg>`
Â  }
];

function rand(min,max){ return min + Math.random()*(max-min); }

/* ====== CHARACTER SELECTION (NOVO) ====== */
const charSelect = document.getElementById('charSelect');
const startBtn = document.getElementById('startBtn');
const charGrid = document.getElementById('charGrid');


// Create grid cards
function createCharacterGrid() {
Â  characters.forEach((char, index) => {
Â  Â  const card = document.createElement('div');
Â  Â  card.className = 'char-card';
Â  Â  card.dataset.index = index;
Â  Â  
Â  Â  card.innerHTML = `
Â  Â  Â  <div class="char-image">${char.image}</div>
Â  Â  Â  <div class="name">${char.name}</div>
Â  Â  Â  <div class="description">${char.description}</div>
Â  Â  `;
Â  Â  
Â  Â  card.addEventListener('click', () => {
Â  Â  Â  // Remove selected class from all cards
Â  Â  Â  document.querySelectorAll('.char-card').forEach(c => c.classList.remove('selected'));
Â  Â  Â  // Add selected class to this card
Â  Â  Â  card.classList.add('selected');
Â  Â  Â  selectedChar = index;
Â  Â  Â  startBtn.disabled = false;
Â  Â  });
Â  Â  
Â  Â  charGrid.appendChild(card);
Â  });
}

// Initialize character grid
createCharacterGrid();

// Start game button
startBtn.addEventListener('click', () => {
Â  if (selectedChar === null) return;
Â  applyCharacter(selectedChar);
Â  charSelect.style.display = 'none';
Â  document.getElementById('app').style.display = 'block';
});

function applyCharacter(index) {
Â  const char = characters[index];
Â  const body = chibiRoot.querySelector('.body');
Â  const legs = chibiRoot.querySelectorAll('.leg');
Â  
Â  body.style.background = char.body;
Â  legs.forEach(leg => leg.style.background = char.legs);
Â  
Â  // Add antenna if character has it
Â  if (char.hasAntenna && !body.querySelector('.antenna-group')) {
Â  Â  const antennaGroup = document.createElement('div');
Â  Â  antennaGroup.className = 'antenna-group';
Â  Â  antennaGroup.style.cssText = 'position:absolute;top:-12px;left:50%;transform:translateX(-50%);width:60px;height:20px;pointer-events:none';
Â  Â  
Â  Â  for(let i = 0; i < 3; i++) {
Â  Â  Â  const antenna = document.createElement('div');
Â  Â  Â  antenna.style.cssText = `position:absolute;top:0;width:3px;height:14px;background:${char.legs};border-radius:2px`;
Â  Â  Â  if(i === 0) antenna.style.left = '8px';
Â  Â  Â  if(i === 1) antenna.style.left = '50%;transform:translateX(-50%)';
Â  Â  Â  if(i === 2) antenna.style.right = '8px';
Â  Â  Â  
Â  Â  Â  const tip = document.createElement('div');
Â  Â  Â  tip.style.cssText = `position:absolute;top:-4px;left:50%;transform:translateX(-50%);width:6px;height:6px;background:${char.body};border-radius:50%`;
Â  Â  Â  antenna.appendChild(tip);
Â  Â  Â  antennaGroup.appendChild(antenna);
Â  Â  }
Â  Â  body.appendChild(antennaGroup);
Â  }
}


/* ====== parallax render ====== */
function renderParallax(){
 layers.forEach(layer=>{
 const speed = parseFloat(layer.dataset.speed) || 0;
 const tx = -cameraX * speed;
 layer.style.transform = `translate3d(${tx}px,0,0)`;
});
}

/* ====== movement ====== */
function setWalking(on){ chibiRoot.classList.toggle('walking', !!on); }

function step(dir){
 const vw = window.innerWidth;
 cameraX += dir * 12;
 cameraX = Math.max(0, Math.min(cameraX, stageWidth - vw));
 renderParallax();
 steps++;
 counterEl.textContent = steps;
}

function loop(){
 if(movingRight) step(+1);
if(movingLeft) step(-1);
 rafId = requestAnimationFrame(loop);
}

function startRAF(){ if(!rafId) rafId = requestAnimationFrame(loop); }
function stopRAF(){ if(rafId){ cancelAnimationFrame(rafId); rafId = null; } }

document.addEventListener('keydown', e=>{
 if(e.repeat) return;
 if(e.key==='ArrowRight'){ movingRight=true; setWalking(true); startRAF(); }
 if(e.key==='ArrowLeft'){ movingLeft=true; setWalking(true); startRAF(); }
 if(e.key==='Enter'){
 chibiRoot.style.transition = 'transform 0.14s ease';
 chibiRoot.style.transform = 'translateY(-14px)';
 setTimeout(()=> chibiRoot.style.transform = '', 160);
steps++; counterEl.textContent = steps;
 }
});
document.addEventListener('keyup', e=>{
 if(e.key==='ArrowRight'){ movingRight=false; }
 if(e.key==='ArrowLeft'){ movingLeft=false; }
 if(!movingLeft && !movingRight){ setWalking(false); stopRAF(); }
});

/* ====== static objects (clouds/trees/flowers) ====== */
function populateStatics(){
   const sky = document.getElementById('skyObjs');
 const trees = document.getElementById('trees');
 const flowers = document.getElementById('flowers');

 for(let i=0;i<10;i++){
 const c = document.createElement('div');
 c.className = 'cloud';
 c.style.left = rand(0,5600)+'px';
 c.style.top = rand(20,160)+'px';
 c.style.width = rand(120,260)+'px';
 sky.appendChild(c);
 }

for(let i=0;i<28;i++){
 const t = document.createElement('div');
 t.className = 'tree';
 t.style.left = rand(0,5800)+'px';
 t.style.transform = `scale(${rand(0.7,1.1)})`;
 trees.appendChild(t);
 }

 for(let i=0;i<80;i++){
 const f = document.createElement('div');
f.className = 'flower';
f.style.left = rand(0,window.innerWidth)+'px';
f.style.width = rand(6,12)+'px';
f.style.height = rand(8,16)+'px'; f.style.background = `hsl(${Math.round(rand(0,360))} 75% 70%)`;
flowers.appendChild(f);
 }
}

/* ====== butterflies (fixed; clickable) ====== */
function spawnButterflies(){
for(let i=0;i<6;i++){
 const b = document.createElement('img');
 b.className = 'flying-butterfly';
 b.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(
`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><g transform='translate(12,12)'><ellipse rx='6' ry='8' fill='#ff8cc9' transform='translate(-5,0) rotate(-18)'/><ellipse rx='6' ry='8' fill='#ffd79c' transform='translate(5,0) rotate(18)'/><rect x='-1' y='-3' width='2' height='7' fill='#333' rx='1'/></g></svg>`
);
 b.style.top = rand(12,72) + 'vh';
  const dur = rand(9,18);
  b.style.animation = `crossScreen ${dur}s linear ${rand(-6,0)}s infinite`;
  b.addEventListener('click', ()=> openOverlay());
  document.body.appendChild(b); }
}

/* ====== overlay controls ====== */
const overlay = document.getElementById('overlay');
const overlayClose = document.getElementById('overlayClose');
function openOverlay(){ overlay.style.display = 'flex'; overlay.setAttribute('aria-hidden','false'); }
function closeOverlay(){ overlay.style.display = 'none'; overlay.setAttribute('aria-hidden','true'); }

overlayClose.addEventListener('click', closeOverlay);
overlay.addEventListener('click', (e)=> { if(e.target === overlay) closeOverlay(); });

/* ====== EYES: pupil tracking + blink ====== */
const eyes = Array.from(document.querySelectorAll('.eye'));
function updatePupils(clientX, clientY){
eyes.forEach(eye=>{
const pupil = eye.querySelector('.pupil');
const rect = eye.getBoundingClientRect();
const cx = rect.left + rect.width/2;
const cy = rect.top + rect.height/2;
const dx = clientX - cx;
const dy = clientY - cy;
const max = 4;
const angle = Math.atan2(dy, dx);
const dist = Math.min(max, Math.hypot(dx,dy)/10);
const tx = Math.cos(angle) * dist;
const ty = Math.sin(angle) * dist;
pupil.style.transform = `translate(${tx}px, ${ty}px)`;
Â  });
}

window.addEventListener('mousemove', (e)=> updatePupils(e.clientX, e.clientY));

window.addEventListener('touchmove', (e)=>{
const t = e.touches[0];
if(t) updatePupils(t.clientX, t.clientY);
}, {passive:true});

function blinkOnce(){
const i = Math.floor(Math.random()*eyes.length);
const eye = eyes[i];
if(!eye) return;
eye.classList.add('blink');
setTimeout(()=> eye.classList.remove('blink'), 160);
scheduleBlink();
}
function scheduleBlink(){
   const next = 2000 + Math.random()*4000;
setTimeout(blinkOnce, next);
}
scheduleBlink();

/* ====== init ====== */
populateStatics();
spawnButterflies();
renderParallax();
</script>
</body>
</html>